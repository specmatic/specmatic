name: CI Build

on:
  push:
    branches: [ main, spring-issues ]
  pull_request:
    branches: [ main ]

jobs:
  build:
    strategy:
      matrix:
        os: [ ubuntu-latest, windows-latest ]
    runs-on: ${{ matrix.os }}

    steps:
    - uses: actions/checkout@v4
    - name: Fetch artifact from another repository
      run: |
        curl -H "Authorization: token ${{ secrets.GITHUB_TOKEN }}" \
         -H "Accept: application/vnd.github.v3+json" \
         https://api.github.com/repos/znsio/example-inline-editor-module/actions/artifacts \
         | jq '.artifacts[0].archive_download_url' \
         | xargs curl -L -o artifact.zip
        unzip artifact.zip -d ./downloaded-artifact/
